<ToggleButton x:Class="BrainCard.ColorButton"
              xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
              xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
              xmlns:sys="clr-namespace:System;assembly=mscorlib"
              Background="Transparent"
              BorderBrush="Transparent"
              Width="45"
              Height="45"
              Margin="3.5"
              DataContext="{Binding RelativeSource={RelativeSource Self}}"
              AutomationProperties.Name="{Binding Color}">
    <ToggleButton.Resources>
        <sys:Double x:Key="SwatchSize">37</sys:Double>
    </ToggleButton.Resources>


    <ToggleButton.Template>
        <ControlTemplate TargetType="ToggleButton">
            <Grid>
                <!-- 背景の円 -->
                <Ellipse x:Name="BackgroundCircle"
                         Width="45"
                         Height="45"
                         VerticalAlignment="Center"
                         HorizontalAlignment="Center"
                         Fill="Transparent"
                         StrokeThickness="2"
                         Stroke="Transparent" />

                <!-- カラーボタンの円 -->
                <Ellipse x:Name="FourgrouneCircle"
                         Fill="{Binding ColorBrush}"
                         Width="{StaticResource SwatchSize}"
                         Height="{StaticResource SwatchSize}" />
            </Grid>
            <ControlTemplate.Triggers>
                <!-- マウスオーバー時 -->
                <Trigger Property="IsMouseOver"
                         Value="True">
                    <Setter TargetName="BackgroundCircle"
                            Property="Stroke"
                            Value="{Binding AccentColorBrush}" />
                </Trigger>
                <!-- チェック時 -->
                <Trigger Property="IsChecked"
                         Value="True">
                    <Setter TargetName="BackgroundCircle"
                            Property="Stroke"
                            Value="{Binding AccentColorBrush}" />
                </Trigger>
            </ControlTemplate.Triggers>
        </ControlTemplate>
    </ToggleButton.Template>
</ToggleButton>
