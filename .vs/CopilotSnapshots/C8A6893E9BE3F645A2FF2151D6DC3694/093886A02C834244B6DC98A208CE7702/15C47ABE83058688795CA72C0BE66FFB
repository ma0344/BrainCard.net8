<Window x:Class="BrainCard.MainWindow"
        x:Name="window"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:BrainCard"
        xmlns:controls="clr-namespace:Microsoft.Toolkit.Wpf.UI.Controls;assembly=Microsoft.Toolkit.Wpf.UI.Controls"
        xmlns:properties="clr-namespace:BrainCard.Properties"
        mc:Ignorable="d"
        xmlns:ui="http://schemas.modernwpf.com/2019"
        ui:WindowHelper.UseModernWindowStyle="True"
        ui:ThemeManager.IsThemeAware="True"
        ResizeMode="CanResizeWithGrip"
        xmlns:sys="clr-namespace:System;assembly=mscorlib"
        Title="{Binding WindowTitle}"
        d:Height="1700"
        Height="1000"
        Width="1500">
    <Window.Resources>
        <!-- ListViewItem のスタイルを定義 -->
        <Style TargetType="ui:ListViewItem">
            <Setter Property="Background"
                    Value="Transparent" />
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="ui:ListViewItem">
                        <Border x:Name="Border"
                                Background="{TemplateBinding Background}"
                                BorderBrush="{TemplateBinding BorderBrush}"
                                BorderThickness="{TemplateBinding BorderThickness}">
                            <ContentPresenter />
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsSelected"
                                     Value="True">
                                <Setter TargetName="Border"
                                        Property="Background"
                                        Value="LightGray" />
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
        <sys:String x:Key="PinnedIcon">&#xE840;</sys:String>
        <!-- 垂直のピン -->
        <sys:String x:Key="UnpinnedIcon">&#xE718;</sys:String>
        <!-- 横向きのピン -->
        <local:VisibilityConverter x:Key="VisibilityConverter" />
        <local:PaneWidthConverter x:Key="PaneWidthConverter" />
        <local:SplitViewPaneRootListViewWidthConverter x:Key="SplitViewPaneRootListViewWidthConverter"
                                                       />
    </Window.Resources>

    <Grid x:Name="RootGrid"
          VerticalAlignment="Stretch"
          HorizontalAlignment="Stretch"
          Height="Auto"
          Background="#FFEFE1E1"
          Width="Auto">
        <Grid.RowDefinitions>
            <RowDefinition Height="0" />
            <RowDefinition Height="*" />
            <RowDefinition Height="20" />
        </Grid.RowDefinitions>


        <ScrollViewer x:Name="MainScrollViewer"
                      Grid.Row="1"
                      HorizontalScrollBarVisibility="Visible"
                      VerticalScrollBarVisibility="Visible"
                      PanningMode="Both"
                      Background="#FFE1E1E1"
                      IsManipulationEnabled="True">
            <Grid x:Name="MainCanvasGrid"
                  Grid.Row="1"
                  HorizontalAlignment="Left"
                  VerticalAlignment="Top"
                  Background="#FFE1E1E1">
                <Canvas x:Name="MainCanvas"
                        Width="{Binding ActualWidth, ElementName=MainCanvasGrid, Mode=OneTime}"
                        Height="{Binding ActualWidth, ElementName=MainCanvasGrid, Mode=OneTime}"
                        HorizontalAlignment="Left"
                        VerticalAlignment="Top"
                        >
                        <!--Background="#01000000"-->
                    <Canvas.LayoutTransform>
                        <MatrixTransform x:Name="MainCanvasTransform" />
                    </Canvas.LayoutTransform>


                </Canvas>
            </Grid>
        </ScrollViewer>

        <!-- Full-window overlay (covers canvas + SplitView). -->
        <Grid x:Name="OverrayGrid"
              Grid.Row="1"
              HorizontalAlignment="Stretch"
              VerticalAlignment="Stretch"
              Panel.ZIndex="1000002"
              Background="#66000000"
              Visibility="Hidden"
              MouseLeftButtonDown="OverrayGrid_MouseLeftButtonDown">
            <Border HorizontalAlignment="Center"
                    VerticalAlignment="Center"
                    Background="#DDFFFFFF"
                    CornerRadius="8"
                    Padding="16"
                    SnapsToDevicePixels="True">
                <StackPanel Orientation="Vertical"
                            HorizontalAlignment="Center">
                    <TextBlock x:Name="OverrayMessageTextBlock"
                               Text="{Binding LoadingMessage}"
                               FontSize="16"
                               Foreground="Black"
                               HorizontalAlignment="Center" />
                    <ProgressBar x:Name="OverrayProgressBar"
                                 Margin="0,10,0,0"
                                 Width="180"
                                 Height="6"
                                 IsIndeterminate="True" />
                </StackPanel>
            </Border>
        </Grid>

        <Rectangle x:Name="MenuOpenRectangle"
              Grid.Row="1"
              VerticalAlignment="Stretch"
              HorizontalAlignment="Left" 
              Width="10"
              Height="{Binding ElementName=RootGrid,Path=ActualHeight}"
              Fill="#55000000"
              GotMouseCapture="MenuOpenRectangle_GotMouseCapture"
              MouseEnter="MenuOpenRectangle_MouseEnter"
              />


        <ui:SplitView x:Name="SplitView"
                      Grid.Row="1"
                      HorizontalAlignment="Left"
                      OpenPaneLength="400"
                      d:IsPaneOpen="True"
                      DisplayMode="Overlay"
                      Canvas.ZIndex="1000000"
                      Grid.IsSharedSizeScope="True"
                      
                      ScrollViewer.HorizontalScrollBarVisibility="Visible">
            <ui:SplitView.Pane>

                <ScrollViewer x:Name="SplitViewPaneRootListView"
                              HorizontalAlignment="Stretch"
                              ScrollViewer.VerticalScrollBarVisibility="Hidden"
                              ScrollViewer.HorizontalScrollBarVisibility="Hidden">
                    <Grid x:Name="SplitViewRootGrid"
                          MinWidth="200"
                          HorizontalAlignment="Stretch"
                          Margin="0,5,0,0">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="10" 
                                              />
                            <ColumnDefinition MinWidth="180"
                                              Width="*"/>
                            <ColumnDefinition Width="10"
                                              />
                        </Grid.ColumnDefinitions>
                        <Grid x:Name="SpaceerGrid"
                              Width="10" />
                        <Grid x:Name="PaneGridMainGrid" 
                              Grid.Column="1"
                            Margin="0,0,0,0"
                              HorizontalAlignment="Stretch">

                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto" />
                                <RowDefinition Height="Auto" />
                                <RowDefinition Height="330px" />
                                <RowDefinition Height="Auto" />
                                <RowDefinition Height="Auto" />
                            </Grid.RowDefinitions>
                            <ToggleButton x:Name="HamburgerMenuPin"
                                          Grid.Row="0"
                                          
                                          Background="Transparent"
                                          Width="20"
                                          Height="20"
                                          Margin="0,0,5,0"
                                          FontFamily="Segoe MDL2 Assets"
                                          BorderThickness="1"
                                          HorizontalAlignment="Right"
                                          Checked="HamburgerMenuPin_Checked"
                                          Unchecked="HamburgerMenuPin_Unchecked"
                                          >
                                <ToggleButton.Style>
                                    <Style TargetType="ToggleButton"
                                           BasedOn="{StaticResource {x:Type ToggleButton}}">
                                        <Setter Property="Background"
                                                Value="Transparent" />
                                        
                                        <Setter Property="Template">
                                            <Setter.Value>
                                                <ControlTemplate TargetType="ToggleButton">
                                                    <Border x:Name="Border"
                                                            CornerRadius="2"
                                                            Background="{TemplateBinding Background}"
                                                            BorderBrush="{TemplateBinding BorderBrush}"
                                                            BorderThickness="{TemplateBinding BorderThickness}"
                                                            >
                                                        <ContentPresenter HorizontalAlignment="Center"
                                                                          VerticalAlignment="Center" />
                                                    </Border>
                                                    <ControlTemplate.Triggers>
                                                        <Trigger Property="IsChecked"
                                                                 Value="True">
                                                            <Setter Property="Content">
                                                                <Setter.Value>
                                                                    <TextBlock Text="{StaticResource PinnedIcon}"
                                                                               FontFamily="Segoe MDL2 Assets" />
                                                                </Setter.Value>
                                                            </Setter>
                                                            <Setter Property="Background"
                                                                    Value="Transparent" />
                                                            <Setter TargetName="Border"
                                                                    Property="Background"
                                                                    Value="Transparent" />

                                                        </Trigger>
                                                        <Trigger Property="IsChecked"
                                                                 Value="False">
                                                            <Setter Property="Content">
                                                                <Setter.Value>
                                                                    <TextBlock Text="{StaticResource UnpinnedIcon}"
                                                                               FontFamily="Segoe MDL2 Assets" />
                                                                </Setter.Value>
                                                            </Setter>
                                                            <Setter TargetName="Border"
                                                                    Property="Background"
                                                                    Value="Transparent" />
                                                            

                                                        </Trigger>
                                                        <MultiTrigger>
                                                            <MultiTrigger.Conditions>
                                                                <Condition Property="IsMouseOver"
                                                                           Value="True" />
                                                                <Condition Property="IsChecked"
                                                                           Value="True" />
                                                            </MultiTrigger.Conditions>
                                                            <Setter TargetName="Border"
                                                                    Property="Background"
                                                                    Value="Gray" />
                                                            <Setter Property="Content">
                                                                <Setter.Value>
                                                                    <TextBlock Foreground="Black"
                                                                               Text="{StaticResource PinnedIcon}"
                                                                               FontFamily="Segoe MDL2 Assets" />
                                                                </Setter.Value>
                                                            </Setter>
                                                        </MultiTrigger>

                                                        <MultiTrigger>
                                                            <MultiTrigger.Conditions>
                                                                <Condition Property="IsMouseOver"
                                                                           Value="True" />
                                                                <Condition Property="IsChecked"
                                                                           Value="False" />
                                                            </MultiTrigger.Conditions>
                                                            <Setter TargetName="Border"
                                                                    Property="Background"
                                                                    Value="LightGray" />
                                                            <Setter Property="Content">
                                                                <Setter.Value>
                                                                    <TextBlock Foreground="Black"
                                                                               Text="{StaticResource UnpinnedIcon}"
                                                                               FontFamily="Segoe MDL2 Assets" />
                                                                </Setter.Value>
                                                            </Setter>
                                                        </MultiTrigger>


                                                    </ControlTemplate.Triggers>
                                                </ControlTemplate>
                                            </Setter.Value>
                                        </Setter>
                                    </Style>

                                </ToggleButton.Style>
                                
                            </ToggleButton>
                            <Grid VerticalAlignment="Top"

                                  Grid.Row="1"
                                  HorizontalAlignment="Stretch">
                                <Grid Margin="0,5,0,0"
                                      HorizontalAlignment="Stretch">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="1*" />
                                        <ColumnDefinition Width="1*" />
                                    </Grid.ColumnDefinitions>
                                    <Button x:Name="BackButton"
                                            Grid.Column="0"
                                            Content="{DynamicResource BackButtonContent}"
                                            Margin="0,0,2,0"
                                            IsHitTestVisible="True"
                                            HorizontalAlignment="Stretch"
                                            Click="BackButton_Click" />
                                    <Button x:Name="FrontButton"
                                            Grid.Column="1"
                                            Content="{DynamicResource FrontButtonContent}"
                                            Margin="2,0,0,0"
                                            HorizontalAlignment="Stretch"
                                            Click="FrontButton_Click" />
                                </Grid>


                            </Grid>
                            <ui:ListView x:Name="CardsListView"
                                         Grid.Row="2"
                                         ItemsSource="{Binding CardList}"
                                         Margin="0,15,0,15"
                                         VerticalAlignment="Stretch"
                                         HorizontalAlignment="Stretch"
                                         Background="White"
                                         AllowDrop="True"
                                         MinHeight="300"
                                         ScrollViewer.VerticalScrollBarVisibility="Auto"
                                         SelectionChanged="CardsListView_SelectionChanged"
                                         PreviewMouseLeftButtonDown="CardsListView_PreviewMouseLeftButtonDown"
                                         PreviewMouseRightButtonUp="CardsListView_PreviewMouseRightButtonUp"
                                         MouseMove="CardsListView_MouseMove"
                                         DragOver="CardsListView_DragOver"
                                         Drop="CardsListView_Drop"
                                         DragLeave="CardsListView_DragLeave"
                                         Cursor="SizeNS">
                                <ui:ListView.ContextMenu>
                                    <ContextMenu>
                                        <MenuItem x:Name="ContextMenuEdit"
                                                  Header="{DynamicResource ContextMenuEditHeader}"
                                                  Click="ContextMenuEdit_Click" />
                                        <MenuItem x:Name="ContextMenuDelete"
                                                  Header="{DynamicResource ContextMenuDeleteHeader}"
                                                  Click="ContextMenuDelete_Click" />
                                    </ContextMenu>
                                </ui:ListView.ContextMenu>

                                <ui:ListView.ItemTemplate>

                                    <DataTemplate x:Name="CardListItemTemplate">
                                        <StackPanel Orientation="Horizontal"
                                                    AllowDrop="False">
                                            <TextBlock x:Name="inktext"
                                                       Text="{Binding RecognizedText}"
                                                       Foreground="Black"
                                                       Margin="0,0,10,0" />
                                            <TextBlock x:Name="zIndexText"
                                                       Text="{Binding Z}"
                                                       Visibility="{Binding ElementName=window, Path=DataContext.DebugTextVisible}"
                                                       Foreground="Red" />
                                        </StackPanel>
                                    </DataTemplate>
                                </ui:ListView.ItemTemplate>
                            </ui:ListView>
                            <GridSplitter x:Name="SplitViewRootGridSplitter"
                                          Grid.Row="3"
                                          Height="10"
                                          Background="Transparent"
                                          HorizontalAlignment="Stretch"
                                          VerticalAlignment="Stretch"
                                          ResizeBehavior="BasedOnAlignment"
                                          ResizeDirection="Rows"
                                          ShowsPreview="True"
                                          Margin="0,0,0,10"
                                          BorderBrush="Gray"
                                          BorderThickness="0 1px"/>
                            <StackPanel Grid.Row="4">
                                <StackPanel Orientation="Vertical">
                                    <TextBlock Text="{DynamicResource ScaleSliderHeader}" />
                                    <Slider x:Name="ImageScaleSlider"
                                            Minimum="5"
                                            Maximum="300"
                                            Value="100"
                                            ToolTip="{Binding RelativeSource={RelativeSource Self}, Path=Value}"
                                            SmallChange="1"
                                            LargeChange="10"
                                            Margin="0,0,0,0"
                                            Height="Auto"
                                            AutoToolTipPlacement="TopLeft"
                                            HorizontalAlignment="Stretch"
                                            VerticalAlignment="Center"
                                            ValueChanged="Slider_ValueChanged"
                                            PreviewMouseWheel="Slider_PreviewMouseWheel"
                                            IsMoveToPointEnabled="True" />

                                </StackPanel>
                                <Grid x:Name="ButtonGrid"
                                      Margin="0,10,0,10">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition x:Name="ButtonGridCol0"
                                                          Width="*" />
                                        <ColumnDefinition x:Name="ButtonGridCol2"
                                                          Width="*" />
                                    </Grid.ColumnDefinitions>
                                    <ui:SplitButton x:Name="SaveDropDown"
                                                    Grid.Column="0"
                                                    HorizontalAlignment="Stretch"
                                                    Height="30"
                                                    Margin="0,0,2,0"
                                                    Click="SaveDropDown_Click"
                                                    Content="{DynamicResource SaveButtonContent}">
                                        <ui:SplitButton.Flyout>
                                            <ui:MenuFlyout>
                                                <MenuItem Width="120"
                                                          Header="{DynamicResource OverWriteMenuContent}"
                                                          Click="OverWrite_Click" />
                                                <MenuItem Width="120"
                                                          Header="{DynamicResource SaveAsMenuContent}"
                                                          Click="SaveAs_Click" />
                                            </ui:MenuFlyout>
                                        </ui:SplitButton.Flyout>
                                    </ui:SplitButton>
                                    <Button x:Name="LoadButton"
                                            Content="{DynamicResource LoadButtonContent}"
                                            Grid.Column="2"
                                            Click="LoadButton_Click"
                                            Height="30"
                                            Margin="2,0,0,0"
                                            HorizontalAlignment="Stretch"/>
                                </Grid>
                                <Grid
                                      Margin="0,0,0,0"
                                      HorizontalAlignment="Stretch">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*" />
                                        <ColumnDefinition Width="Auto" />
                                    </Grid.ColumnDefinitions>
                                    <Button x:Name="ClearAllButton"
                                            Grid.Column="0"
                                            Content="{DynamicResource ClearButtonContent}"
                                            Margin="0,20,0,20"
                                            Click="ClearAllButton_Click"
                                            Height="50"
                                            HorizontalAlignment="Stretch"
                                            VerticalAlignment="Center" />
                                    <ui:ToggleSwitch x:Name="CardCanvasVisibleSwitch"
                                                     Grid.Column="1"
                                                     IsOn="True"
                                                     Width="120"
                                                     HorizontalAlignment="Right"
                                                     Margin="15,0,0,0"
                                                     Header="{DynamicResource InputWindowToggleSwitchHeader}"
                                                     OnContent="{DynamicResource InputWindowToggleSwitchOnContent}"
                                                     OffContent="{DynamicResource InputWindowToggleSwitchOffContent}"
                                                     Toggled="CardCanvasVisibleSwitch_Toggled" />
                                </Grid>


                                <Expander Header="{DynamicResource EffectExpanderHeader}"
                                          d:IsExpanded="True">
                                    <StackPanel >
                                        <Grid >
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="*" />
                                                <ColumnDefinition Width="*" />
                                            </Grid.ColumnDefinitions>
                                            <TextBlock Grid.Column="0"
                                                       FontSize="15"
                                                       VerticalAlignment="Center"
                                                       HorizontalAlignment="Left"
                                                       Text="{DynamicResource ShadowColorPickerButtonHeader}" />
                                            <local:ColorPickerButton x:Name="ShadowColorPickerButton"
                                                                     Grid.Column="0"
                                                                     SelectedColor="Black"
                                                                     SelectAfterFlyoutClose="True"
                                                                     HorizontalAlignment="Right"
                                                                     VerticalAlignment="Center"
                                                                     ColorChanged="ShadowColorPickerButton_ColorChanged" />
                                            <ui:ToggleSwitch x:Name="ShadowToggle"
                                                             Grid.Column="1"
                                                             Margin="15,0,0,0"
                                                             Toggled="ShadowToggle_Toggled"
                                                             Header="{DynamicResource ShadowToggleSwitchHeader}"
                                                             OnContent="{DynamicResource ShadowToggleSwitchOnContent}"
                                                             OffContent="{DynamicResource ShadowToggleSwitchOffContent}" />
                                        </Grid>
                                        <Grid Margin="0,10,0,0">
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="*" />
                                                <ColumnDefinition Width="*" />
                                            </Grid.ColumnDefinitions>
                                            <ui:ToggleSwitch x:Name="SelectedCardShowTopToggleSwitch"
                                                             Grid.Column="1"
                                                             Margin="15,0,0,0"
                                                             Toggled="SelectedCardShowTopToggleSwitch_Toggled"
                                                             Header="{DynamicResource SelectedCardShowTopToggleSwitchHeader}"
                                                             OnContent="{DynamicResource SelectedCardShowTopToggleSwitchOnContent}"
                                                             OffContent="{DynamicResource SelectedCardShowTopToggleSwitchOffContent}" />

                                        </Grid>
                                        <TextBlock VerticalAlignment="Center"
                                                   HorizontalAlignment="Left"
                                                   Text="{DynamicResource BlurRadiusSliderHeader}" />
                                        <Slider x:Name="BlurRadiusSlider"
                                                TickFrequency="0.1"
                                                Minimum="0"
                                                Maximum="200"
                                                Value="{Binding ShadowBlurRadius, Mode=TwoWay}"
                                                SmallChange="0.1"
                                                LargeChange="10"
                                                ToolTip="{Binding RelativeSource={RelativeSource Self}, Path=Value}"
                                                HorizontalAlignment="Stretch"
                                                AutoToolTipPlacement="TopLeft"
                                                ValueChanged="Slider_ValueChanged"
                                                PreviewMouseWheel="Slider_PreviewMouseWheel"
                                                IsMoveToPointEnabled="True"/>

                                        <TextBlock VerticalAlignment="Center"
                                                   HorizontalAlignment="Left"
                                                   Text="{DynamicResource ShadowDepthSliderHeader}" />
                                        <Slider x:Name="ShadowDepthSlider"
                                                Minimum="0"
                                                Maximum="50"
                                                Value="{Binding ShadowDepth, Mode=TwoWay}"
                                                SmallChange="1"
                                                LargeChange="3"
                                                ToolTip="{Binding RelativeSource={RelativeSource Self}, Path=Value}"
                                                HorizontalAlignment="Stretch"
                                                AutoToolTipPlacement="TopLeft"
                                                ValueChanged="Slider_ValueChanged"
                                                PreviewMouseWheel="Slider_PreviewMouseWheel"
                                                IsMoveToPointEnabled="True" />

                                        <TextBlock VerticalAlignment="Center"
                                                   HorizontalAlignment="Left"
                                                   Text="{DynamicResource DirectionSliderHeader}" />
                                        <Slider x:Name="DirectionSlider"
                                                Minimum="0"
                                                Maximum="360"
                                                Value="{Binding ShadowDirection, Mode=TwoWay}"
                                                SmallChange="1"
                                                LargeChange="15"
                                                ToolTip="{Binding RelativeSource={RelativeSource Self}, Path=Value}"
                                                HorizontalAlignment="Stretch"
                                                AutoToolTipPlacement="TopLeft"
                                                ValueChanged="Slider_ValueChanged"
                                                PreviewMouseWheel="Slider_PreviewMouseWheel"
                                                IsMoveToPointEnabled="True" />

                                        <TextBlock VerticalAlignment="Center"
                                                   HorizontalAlignment="Left"
                                                   Text="{DynamicResource OpacitySliderHeader}" />
                                        <Slider x:Name="OpacitySlider"
                                                TickFrequency="0.1"
                                                Minimum="0"
                                                Maximum="1"
                                                Value="{Binding ShadowOpacity,Mode=TwoWay}"
                                                SmallChange="0.1"
                                                LargeChange="0.1"
                                                ToolTip="{Binding RelativeSource={RelativeSource Self}, Path=Value}"
                                                HorizontalAlignment="Stretch"
                                                AutoToolTipPlacement="TopLeft"
                                                AutoToolTipPrecision="1"
                                                ValueChanged="Slider_ValueChanged"
                                                PreviewMouseWheel="Slider_PreviewMouseWheel"
                                                IsMoveToPointEnabled="True" />
                                    </StackPanel>

                                </Expander>


                                <Expander Header="{DynamicResource OptionExpanderHeader}"
                                          HorizontalContentAlignment="Stretch"
                                          d:IsExpanded="True">
                                    <StackPanel  HorizontalAlignment="Stretch">
                                        <Grid HorizontalAlignment="Stretch"
                                              Margin="0,10,0,10">
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="Auto" />
                                                <ColumnDefinition Width="*" />
                                            </Grid.ColumnDefinitions>

                                            <ComboBox x:Name="LanguageSelector"
                                                      Text="{DynamicResource LanguageSelectorHeader}"
                                                      HorizontalAlignment="Stretch"
                                                      SelectionChanged="LanguageSelector_SelectionChanged"
                                                      SelectedIndex="1"
                                                      Margin="0,5,10,0">

                                                <ComboBoxItem Content="English"
                                                              Tag="en-US" />
                                                <ComboBoxItem Content="日本語"
                                                              Tag="ja-JP" />
                                            </ComboBox>

                                            <TextBlock Grid.Column="1"
                                                       FontSize="15"
                                                       VerticalAlignment="Center"
                                                       HorizontalAlignment="Left"
                                                       Width="Auto"
                                                       Text="{DynamicResource ColorPickerButtonHeader}" />
                                            <local:ColorPickerButton Grid.Column="1"
                                                                     x:Name="CanvasColorPickerButton"
                                                                     SelectedColor="White"
                                                                     SelectAfterFlyoutClose="True"
                                                                     HorizontalAlignment="Right" />
                                        </Grid>
                                        <Grid Margin="0,5"
                                              HorizontalAlignment="Stretch">
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="*" />
                                                <ColumnDefinition Width="*" />
                                            </Grid.ColumnDefinitions>

                                            <ui:ToggleSwitch x:Name="ThemeToggleSwitch"
                                                             Grid.Column="0"
                                                             Header="{DynamicResource ThemeToggleSwitchHeader}"
                                                             OnContent="{DynamicResource ThemeToggleSwitchOnContent}"
                                                             OffContent="{DynamicResource ThemeToggleSwitchOffContent}" />
                                            <!--Toggled="ThemeToggleSwitch_Toggled"-->

                                            <ui:ToggleSwitch x:Name="DebugModeSwitch"
                                                             Grid.Column="1"
                                                             Header="{DynamicResource DebugModeSwitchHeader}"
                                                             OnContent="{DynamicResource DebugModeSwitchOnContent}"
                                                             OffContent="{DynamicResource DebugModeSwitchOffContent}"
                                                             Toggled="DebugModeSwitch_Toggled" />
                                            <!--Toggled="DebugModeSwitch_Toggled"-->
                                        </Grid>
                                    </StackPanel>
                                </Expander>
                            </StackPanel>
                        </Grid>
                        <GridSplitter Grid.Column="2"
                                      Background="Transparent"
                                      Width="10"
                                      SnapsToDevicePixels="True"
                                      DragDelta="GridSplitter_DragDelta"/>

                    </Grid>

                </ScrollViewer>
            </ui:SplitView.Pane>

        </ui:SplitView>

        <StatusBar Grid.Row="2"
                   HorizontalAlignment="Right"
                   Background="Black">
            <Grid Width="{Binding ElementName=RootGrid,Path=ActualWidth}">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto" />
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="Auto" />
                </Grid.ColumnDefinitions>
                <TextBlock x:Name="StatusBarMessageTextBlock"
                           Margin="20,0,0,0"
                           d:Foreground="White"
                           d:Text="読 loadに成功しました"
                           Grid.Column="0"/>
                <StackPanel Grid.Column="2"
                            Orientation="Horizontal"
                            HorizontalAlignment="Right">
                    
                    <TextBlock 
                        d:Foreground="White"
                        HorizontalAlignment="Right"
                        Margin="0,0,20,0"
                        d:Text="カード数 1 枚"
                        Text="{Binding CardList.Count,StringFormat={}カード数 {0} 枚}" />
                    <ResizeGrip />
                </StackPanel>
            </Grid>
        </StatusBar>
    </Grid>
</Window>
